import React from 'react';

export const data = {
  "http://www.specialprivacy.eu/vocabs/data#Activity": "activity",
  "http://www.specialprivacy.eu/vocabs/data#Anonymized": "anonymized",
  "http://www.specialprivacy.eu/vocabs/data#AudiovisualActivity": "audiovisual activity",
  "http://www.specialprivacy.eu/vocabs/data#Computer": "computer",
  "http://www.specialprivacy.eu/vocabs/data#Content": "content",
  "http://www.specialprivacy.eu/vocabs/data#Demographic": "demographic",
  "http://www.specialprivacy.eu/vocabs/data#Derived": "derived",
  "http://www.specialprivacy.eu/vocabs/data#Financial": "financial",
  "http://www.specialprivacy.eu/vocabs/data#Government": "governmental",
  "http://www.specialprivacy.eu/vocabs/data#Health": "health",
  "http://www.specialprivacy.eu/vocabs/data#Interactive": "interactivity",
  "http://www.specialprivacy.eu/vocabs/data#Judicial": "judicial",
  "http://www.specialprivacy.eu/vocabs/data#Location": "location",
  "http://www.specialprivacy.eu/vocabs/data#Navigation": "navigation",
  "http://www.specialprivacy.eu/vocabs/data#Online": "online",
  "http://www.specialprivacy.eu/vocabs/data#OnlineActivity": "online activity",
  "http://www.specialprivacy.eu/vocabs/data#Physical": "physical",
  "http://www.specialprivacy.eu/vocabs/data#PhysicalActivity": "physical activity",
  "http://www.specialprivacy.eu/vocabs/data#Political": "political",
  "http://www.specialprivacy.eu/vocabs/data#Preference": "preference",
  "http://www.specialprivacy.eu/vocabs/data#Profile": "profile",
  "http://www.specialprivacy.eu/vocabs/data#Purchase": "purchase",
  "http://www.specialprivacy.eu/vocabs/data#Social": "social",
  "http://www.specialprivacy.eu/vocabs/data#State": "state",
  "http://www.specialprivacy.eu/vocabs/data#Statistical": "statistical",
  "http://www.specialprivacy.eu/vocabs/data#TelecomActivity": "telecommunication activity",
  "http://www.specialprivacy.eu/vocabs/data#UniqueId": "unique identifier",
  "http://www.specialprivacy.eu/vocabs/data#Message": "message",
};

export const storage = {
  "http://www.specialprivacy.eu/vocabs/locations#EU": "the European Union",
  "http://www.specialprivacy.eu/vocabs/locations#EULike": "countries in the European Economic Area",
  "http://www.specialprivacy.eu/vocabs/locations#ThirdCountries": "countries outside the European Union and the European Economic Area",
  "http://www.specialprivacy.eu/vocabs/locations#ControllerServers": "the controller's servers",
  "http://www.specialprivacy.eu/vocabs/locations#OurServers": "the controller's or processor's servers",
  "http://www.specialprivacy.eu/vocabs/locations#ProcessorServers": "the processor's servers",
  "http://www.specialprivacy.eu/vocabs/locations#ThirdParty": "servers not belonging to the controller or processors",
};

export const processing = {
  "http://www.specialprivacy.eu/vocabs/processing#Aggregate": "aggregate",
  "http://www.specialprivacy.eu/vocabs/processing#Analyze": "analyze",
  "http://www.specialprivacy.eu/vocabs/processing#Anonymize": "anonymize",
  "http://www.specialprivacy.eu/vocabs/processing#Collect": "collect",
  "http://www.specialprivacy.eu/vocabs/processing#Copy": "copy",
  "http://www.specialprivacy.eu/vocabs/processing#Derive": "derive",
  "http://www.specialprivacy.eu/vocabs/processing#Move": "move",
  "http://www.specialprivacy.eu/vocabs/processing#Query": "query",
  "http://www.specialprivacy.eu/vocabs/processing#Transfer": "transfer",
};

export const purpose = {
  "http://www.specialprivacy.eu/vocabs/purposes#Account": "accounting",
  "http://www.specialprivacy.eu/vocabs/purposes#Admin": "administrative",
  "http://www.specialprivacy.eu/vocabs/purposes#Arts": "arts",
  "http://www.specialprivacy.eu/vocabs/purposes#AuxPurpose": "auxiliary",
  "http://www.specialprivacy.eu/vocabs/purposes#Browsing": "browsing",
  "http://www.specialprivacy.eu/vocabs/purposes#Charity": "charity",
  "http://www.specialprivacy.eu/vocabs/purposes#Communicate": "communication",
  "http://www.specialprivacy.eu/vocabs/purposes#Custom": "customization",
  "http://www.specialprivacy.eu/vocabs/purposes#Delivery": "delivery",
  "http://www.specialprivacy.eu/vocabs/purposes#Develop": "development",
  "http://www.specialprivacy.eu/vocabs/purposes#Downloads": "downloading",
  "http://www.specialprivacy.eu/vocabs/purposes#Education": "educational",
  "http://www.specialprivacy.eu/vocabs/purposes#Feedback": "feedback",
  "http://www.specialprivacy.eu/vocabs/purposes#Finmgt": "financial management",
  "http://www.specialprivacy.eu/vocabs/purposes#Gambling": "gambling",
  "http://www.specialprivacy.eu/vocabs/purposes#Gaming": "gaming",
  "http://www.specialprivacy.eu/vocabs/purposes#Government": "governmental",
  "http://www.specialprivacy.eu/vocabs/purposes#Health": "health",
  "http://www.specialprivacy.eu/vocabs/purposes#Historical": "historical",
  "http://www.specialprivacy.eu/vocabs/purposes#Login": "login",
  "http://www.specialprivacy.eu/vocabs/purposes#Marketing": "marketing",
  "http://www.specialprivacy.eu/vocabs/purposes#News": "news",
  "http://www.specialprivacy.eu/vocabs/purposes#OtherContact": "other contacting",
  "http://www.specialprivacy.eu/vocabs/purposes#Payment": "payment",
  "http://www.specialprivacy.eu/vocabs/purposes#Sales": "sales",
  "http://www.specialprivacy.eu/vocabs/purposes#Search": "search",
  "http://www.specialprivacy.eu/vocabs/purposes#State": "state",
  "http://www.specialprivacy.eu/vocabs/purposes#Tailoring": "tailoring",
  "http://www.specialprivacy.eu/vocabs/purposes#Telemarketing": "telemarketing",
};

export const recipient = {
  "http://www.specialprivacy.eu/vocabs/recipients#Delivery": "delivery services",
  "http://www.specialprivacy.eu/vocabs/recipients#Same": "legal entities following the controller's practices",
  "http://www.specialprivacy.eu/vocabs/recipients#OtherRecipient": "legal entities following different practices",
  "http://www.specialprivacy.eu/vocabs/recipients#Ours": "the controller, legal entities that act as the controller's agent or vice versa",
  "http://www.specialprivacy.eu/vocabs/recipients#Public": "public fora",
  "http://www.specialprivacy.eu/vocabs/recipients#Unrelated": "unrelated third parties",
};

export function getLabel(key, upperCase) {
  key = key.replace("https:", "http:");
  var result = "";

  if (data.hasOwnProperty(key)) {
    result = data[key];
  } else if (storage.hasOwnProperty(key)) {
    result = storage[key];
  } else if (processing.hasOwnProperty(key)) {
    result = processing[key];
  } else if (purpose.hasOwnProperty(key)) {
    result = purpose[key];
  } else if (recipient.hasOwnProperty(key)) {
    result = recipient[key];
  }

  if (upperCase) {
    return result.charAt(0).toLocaleUpperCase() + result.slice(1);
  }
  return result;
}

export function event2text(p, profile, controllerStatemment, raw) {

  var intro;
  if (profile === "policy") {
    if (controllerStatemment) {
      intro = "The controller is able to ";
    } else {
      intro = "Permission to ";
    }
  } else {
    if (controllerStatemment) {
      intro = "We did ";
    } else {
      intro = "You do "; // TODO: this case makes no real sense, added for the sake of completeness
    }
  }

  var linebreak = false;
  for (let key of ["data", "purpose", "processing", "storage", "recipient"]) {
    if (Array.isArray(p[key])) {
      var arr = p[key].map((e) => getLabel(e));
      if (arr.length === 1) {
        p[key + "String"] = arr[0];
      } else if (arr.length === 2) {
        linebreak = true;
        p[key + "String"] = arr[0] + " and " + arr[1];
      } else {
        linebreak = true;
        p[key + "String"] = arr.slice(0, arr.length-2).join(", ") + " and " + arr.slice(arr.length-1);
      }
    } else {
      p[key + "String"] = getLabel(p[key]);
    }
  }

  if (raw) {
    let content = 
      intro 
      + p.processingString 
      + ((controllerStatemment) ? " your " : " my ")
      + p.dataString 
      + " data for "
      + p.purposeString
      + " purposes, "
      + ((linebreak) ? "\r\n" : "")
      + "stored in "
      + p.storageString
      + " shared with " 
      + p.recipientString 
      + ".";    
    return content;
  }  

  var content = "";
  if (linebreak) {
    content = <span>
      <p>{intro}<b>{p.processingString}</b> your <b>{p.dataString}</b> data for <b>{p.purposeString}</b> purposes,</p>
      <p>stored in <b>{p.storageString}</b> and shared with <b>{p.recipientString}</b>.</p>
    </span>
  } else {
    content = <span>
      {intro}<b>{p.processingString}</b> your <b>{p.dataString}</b> data for <b>{p.purposeString}</b> purposes,
      stored in <b>{p.storageString}</b> and shared with <b>{p.recipientString}</b>.
    </span>
  }

  return (content);
}

export function instanceDataToText(instanceData) {
  return (
    Object.keys(instanceData)
      .map((key) => {
        return key + ": " + JSON.stringify(instanceData[key]);
      }).join("\r\n")
  );
};